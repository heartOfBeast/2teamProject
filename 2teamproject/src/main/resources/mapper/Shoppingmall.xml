<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cafe2team.dao.ShoppingmallMapper">
	
	<select id="ShoppingmallList" resultType="Shoppingmall">
		SELECT 
			  shU.shoppingmall_user_id						AS shId
			, shU.shoppingmall_user_pw						AS shPw
			, shU.shoppingmall_user_name					AS shUserName
			, shU.shoppingmall_name							AS shName
			, shL.level_code								AS shLevel
			, shL.level_name								AS shLLevelName
			, shU.shoppingmall_user_address					AS shAddr
			, shU.shoppingmall_user_email					AS shEmail
			, shU.shoppingmall_user_phone					AS shPhone
			, shU.shoppingmall_user_iden_num				AS shNum
			, shU.shoppingmall_user_reg_date				AS shReg
			, shU.shoppingmall_user_account_status			AS shStatus
			, shU.shoppingmall_bank							AS shBank
			, shU.shoppingmall_bank_number					AS shBankNum
		FROM 
			tb_shoppingmall_user							AS shU 
			INNER JOIN	
			tb_member_level									AS shL
			on
			shU.shoppingmall_level_code = shL.level_code;
	</select>
	
	
	<update id="shoppingmallAdd" parameterType="Shoppingmall">
		UPDATE 
			tb_shoppingmall_user
		SET
			shoppingmall_name					=		#{shName},
			shoppingmall_user_iden_num			=		#{shNum},
			shoppingmall_user_reg_date			=		NOW(),
			shoppingmall_user_account_status	=		"승인요청",
			shoppingmall_bank					=		#{shBank},
			shoppingmall_bank_number			=		#{shBankNum}
		WHERE 
			shoppingmall_user_id				=		#{shId}
	</update>
</mapper>