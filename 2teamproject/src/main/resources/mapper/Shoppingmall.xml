<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cafe2team.dao.ShoppingmallMapper">
	
	<select id="ShoppingmallList" resultType="Shoppingmall">
		SELECT 
			  shoppingmallUser.shoppingmall_user_id						AS shoppingmallId
			, shoppingmallUser.shoppingmall_user_pw						AS shoppingmallPw
			, shoppingmallUser.shoppingmall_user_name					AS shoppingmallUserName
			, shoppingmallUser.shoppingmall_name						AS shoppingmallName
			, shoppingmallLevel.level_code								AS shoppingmallLevel
			, shoppingmallLevel.level_name								AS shoppingmallLevelName
			, shoppingmallUser.shoppingmall_user_address				AS shoppingmallAddr
			, shoppingmallUser.shoppingmall_user_email					AS shoppingmallEmail
			, shoppingmallUser.shoppingmall_user_phone					AS shoppingmallPhone
			, shoppingmallUser.shoppingmall_user_iden_num				AS shoppingmallNumber
			, shoppingmallUser.shoppingmall_user_reg_date				AS shoppingmallRegDay
			, shoppingmallUser.shoppingmall_user_account_status			AS shoppingmallStatus
			, shoppingmallUser.shoppingmall_bank						AS shoppingmallBank
			, shoppingmallUser.shoppingmall_bank_number					AS shoppingmallBankNum
		FROM 
			tb_shoppingmall_user										AS shoppingmallUser 
			INNER JOIN		
			tb_member_level												AS shoppingmallLevel
			on
			shoppingmallUser.shoppingmall_level_code = shoppingmallLevel.level_code;
	</select>
	
	
	<update id="shoppingmallAdd" parameterType="Shoppingmall">
		UPDATE 
			tb_shoppingmall_user
		SET
			shoppingmall_name					=		#{shoppingmallName},
			shoppingmall_user_iden_num			=		#{shoppingmallNumber},
			shoppingmall_user_reg_date			=		NOW(),
			shoppingmall_user_account_status	=		"승인요청",
			shoppingmall_bank					=		#{shoppingmallBank},
			shoppingmall_bank_number			=		#{shoppingmallBankNum}
		WHERE 
			shoppingmall_user_id				=		#{shoppingmallId}
	</update>
</mapper>