<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cafe2team.dao.WarehouseMapper">

	<resultMap type="Warehouse" id="warehouseResultMap">
		<result property="warehouseCode"			column="warehouse_code"/>
		<result property="warehouseName"			column="warehouse_name"/>
		<result property="warehouseAddr"			column="warehouse_addr"/>
		<result property="warehouseCate"		column="warehouse_cate"/>
		<result property="warehouseArea"		column="warehouse_area"/>
		<result property="warehousePhone"		column="warehouse_phone"/>
		<result property="warehouseRegNumber"		column="warehouse_reg_number"/>
		<result property="warehouseDetail"		column="warehouse_detail"/>
		<result property="warehouseRegDate"	column="warehouse_reg_date"/>
	</resultMap>
	
	<insert id="addWarehouse" parameterType="Warehouse">
		<selectKey keyColumn="warehouse_code" keyProperty="warehouseCode" resultType="String" order="BEFORE">
	      SELECT CONCAT('w','',(SELECT LPAD(COUNT(*)+1,3,'0')FROM tb_warehouse));
	     </selectKey>
	INSERT INTO 
	tb_warehouse
		(
		warehouse_code,
		ware_admin_id,
		warehouse_name,
		warehouse_addr,
		warehouse_cate,
		warehouse_area,
		warehouse_phone,
		warehouse_reg_number,
		warehouse_detail,
		warehouse_reg_date,
		member_id
		)
	VALUES (
		#{warehouseCode},
		'admin001',
		#{warehouseName},
		#{warehouseAddr},
		#{warehouseCate},
		#{warehouseArea},
		#{warehousePhone},
		#{warehouseRegNumber},
		#{warehouseDetail},
		CURDATE(),
		'id001');
	</insert>
	
	<select id="getWarehouseList" resultType="Warehouse" fetchSize="1000" resultMap="warehouseResultMap">
	SELECT 
		warehouse_name,
		warehouse_addr,
		warehouse_cate,
		warehouse_area,
		warehouse_phone,
		warehouse_reg_number,
		warehouse_detail,
		warehouse_reg_date
	FROM
		tb_warehouse;
	</select>
	
</mapper>