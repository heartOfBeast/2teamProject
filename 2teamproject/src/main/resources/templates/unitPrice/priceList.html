<!DOCTYPE html>
<html
	xmlns:th="http://www.thymeleaf.org"
 	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="@{layout/default}">
	
<th:block layout:fragment="pageTitle">
	<div class="page-header">
	<ol class="breadcrumb">
		<li class="breadcrumb-item">Shoppingmall</li>
		<li class="breadcrumb-item active">PriceList</li>
	</ol>

	<ul class="app-actions">
		<li>
			<a href="#" id="reportrange">
				<span class="range-text"></span>
				<i class="icon-chevron-down"></i>	
			</a>
		</li>
		<li>
			<a href="#">
				<i class="icon-export"></i>
			</a>
		</li>
	</ul>
</div>
</th:block>

<th:block layout:fragment="container">
	<div class="table-container">
		<div class="table-responsive">
			<button type="button" class="btn btn-primary float-right" onclick="deleteDate();">삭제</button>
			<button type="button" class="btn btn-primary float-right" onclick="location.href='priceAdd'">등록</button>
			<button type="button" class="btn btn-primary float-right" onclick="location.href='contractAdd'">계약신청</button>
			<table class="table custom-table m-0">
				<thead>
					<tr>
						<th>
					  		<input type="checkbox" id="priceCheck" style="position: relative; top: 1.5px;">
					    </th>
						<th>창고 종류</th>
						<th>계약 종류</th>
						<th>물품 개당 무게</th>
						<th>제한 수량</th>
						<th>구역 개수</th>
						<th>계약 기간</th>
						<th>사용 요금</th>
						<th>수정</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="l: ${priceList}">
						<td>
				  	  		<input type="checkbox" class="checkOne" style="position: relative; top: 1.5px;" th:value="${l.price_Code}">
					    </td>
						<td th:text="${l.wareHouse_Type}"></td>
						<td th:text="${l.contract_Type}"></td>
						<td th:text="${l.price_Weight}"></td>
						<td th:text="${l.price_Number}" ></td>
						<td th:text="${l.price_Zone}"></td>
						<td th:text="${l.price_Day}"></td>
						<td th:text="${l.price_Price}"></td>
						<td>
							<a th:href="@{/priceUpdate(price_Code=${l.price_Code})}" >수정</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</th:block>
<th:block layout:fragment="customJs">
	<script>
			$(function(){
				$('#priceCheck').click(function(){
					if($('#priceCheck').prop('checked')){
						$('.checkOne').prop('checked', true);
					}else{
						$('.checkOne').prop('checked', false);
					}
				})
			})
			function deleteDate(){
				var dataArr = new Array();
				var list = $('.checkOne');
				for(var i=0; i<list.length; i++){
					if(list[i].checked){
						dataArr.push(list[i].value);
					}
				}
				if(dataArr.length == 0){
					alert('삭제할 항목을 선택해주세요.');
				}
				else{
					var chk = confirm('정말 삭제하시겠습니까?');
					if(chk){
						$.ajax({
							url : "/priceRemove",
							method : 'post',
							async : true,
							dataType : "json",
							data : {'dataArr':dataArr},
							success: function(jdata){
								if(jdata != 1){
									alert('오류 : 삭제 실패');
								}else{
									alert('삭제 되었습니다.');
									location.replace("priceList");
								}
							}
				    	});
					}else{
						return false;
					}
						
					
				}
			}
			
	</script>
</th:block>
</html>